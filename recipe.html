<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recipe Keeper ‚Äî Edit Recipe</title>
  <link rel="icon" href="/src/img/Favicon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/src/styles/main.css">
</head>
<body class="recipe-page">
  <!-- Toast Container -->
  <div id="toast-container"></div>

  <!-- Delete Modal -->
  <div class="modal" id="delete-modal">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__icon">‚ö†Ô∏è</div>
      <h3 class="modal__title">Delete Recipe?</h3>
      <p class="modal__text">This action cannot be undone. Are you sure you want to delete this recipe?</p>
      <div class="modal__actions">
        <button class="btn btn--ghost" id="cancel-delete-btn">Cancel</button>
        <button class="btn btn--danger" id="confirm-delete-btn">Delete Recipe</button>
      </div>
    </div>
  </div>

  <!-- Header -->
  <header class="header header--recipe">
    <div class="container header__inner">
      <a href="/" class="logo">
        <span class="logo__icon">üç≥</span>
        <span class="logo__text">Recipe<span class="logo__accent">Keeper</span></span>
      </a>
      
      <div class="recipe-meta-header">
        <span class="recipe-meta-header__date" id="recipe-date"></span>
      </div>

      <button class="btn btn--primary" id="save-exit-btn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
          <polyline points="17 21 17 13 7 13 7 21"></polyline>
          <polyline points="7 3 7 8 15 8"></polyline>
        </svg>
        Save & Exit
      </button>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main recipe-main">
    <div class="container recipe-grid">
      
      <!-- Recipe Form -->
      <section class="recipe-form-section">
        <!-- Title -->
        <div class="recipe-title-group">
          <input 
            type="text" 
            id="recipe-title" 
            class="recipe-title-input" 
            placeholder="Enter your recipe title..."
            maxlength="100"
          >
        </div>

        <!-- Meta Info -->
        <div class="recipe-meta-grid">
          <!-- Rating -->
          <div class="meta-card">
            <label class="meta-card__label">Rating</label>
            <div class="star-rating" id="star-rating">
              <button class="star" data-value="1" aria-label="1 star">‚òÖ</button>
              <button class="star" data-value="2" aria-label="2 stars">‚òÖ</button>
              <button class="star" data-value="3" aria-label="3 stars">‚òÖ</button>
              <button class="star" data-value="4" aria-label="4 stars">‚òÖ</button>
              <button class="star" data-value="5" aria-label="5 stars">‚òÖ</button>
            </div>
          </div>

          <!-- Cooking Time -->
          <div class="meta-card">
            <label class="meta-card__label" for="cooking-time">Cooking Time</label>
            <div class="time-input-group">
              <input type="number" id="cooking-time" class="time-input" min="0" max="999" placeholder="0">
              <span class="time-unit">min</span>
            </div>
          </div>

          <!-- Meal Type -->
          <div class="meta-card">
            <label class="meta-card__label">Meal Type</label>
            <div class="meal-type-selector" id="meal-type-selector">
              <button class="meal-type-btn" data-type="fishDish" aria-label="Fish dish">
                <span class="meal-type-btn__icon">üêü</span>
                <span class="meal-type-btn__label">Fish</span>
              </button>
              <button class="meal-type-btn" data-type="vegDish" aria-label="Vegetarian dish">
                <span class="meal-type-btn__icon">ü•¨</span>
                <span class="meal-type-btn__label">Veggie</span>
              </button>
              <button class="meal-type-btn" data-type="meatDish" aria-label="Meat dish">
                <span class="meal-type-btn__icon">ü•©</span>
                <span class="meal-type-btn__label">Meat</span>
              </button>
            </div>
          </div>
        </div>

        <!-- Instructions -->
        <div class="instructions-section">
          <h2 class="section-subtitle">
            <span class="section-subtitle__icon">üìù</span>
            Preparation Steps
          </h2>
          
          <ol class="instructions-list" id="instructions-list">
            <!-- Instructions render here -->
          </ol>

          <div class="add-instruction-wrapper">
            <button class="btn btn--outline" id="add-instruction-btn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M5 12h14"></path>
              </svg>
              Add Step
            </button>
          </div>

          <form class="instruction-form" id="instruction-form" style="display: none;">
            <textarea 
              class="instruction-textarea" 
              id="instruction-textarea"
              placeholder="Describe this cooking step..."
              rows="3"
            ></textarea>
            <div class="instruction-form__actions">
              <button type="button" class="btn btn--ghost" id="cancel-instruction-btn">Cancel</button>
              <button type="submit" class="btn btn--primary">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
                Save Step
              </button>
            </div>
          </form>
        </div>

        <!-- Delete Recipe -->
        <div class="danger-zone">
          <button class="btn btn--danger-outline" id="delete-recipe-btn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="3 6 5 6 21 6"></polyline>
              <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
              <line x1="10" y1="11" x2="10" y2="17"></line>
              <line x1="14" y1="11" x2="14" y2="17"></line>
            </svg>
            Delete Recipe
          </button>
        </div>
      </section>

      <!-- Ingredients Sidebar -->
      <aside class="ingredients-sidebar">
        <div class="ingredients-card">
          <div class="ingredients-card__header">
            <h2 class="ingredients-card__title">
              <span class="ingredients-card__icon">ü•ï</span>
              Ingredients
            </h2>
          </div>
          
          <ul class="ingredients-list" id="ingredients-list">
            <!-- Ingredients render here -->
          </ul>

          <div class="ingredients-empty" id="ingredients-empty">
            <span class="ingredients-empty__icon">ü•ó</span>
            <p>No ingredients added yet</p>
          </div>

          <div class="add-ingredient-wrapper">
            <button class="btn btn--outline btn--block" id="add-ingredient-btn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M5 12h14"></path>
              </svg>
              Add Ingredient
            </button>
          </div>

          <form class="ingredient-form" id="ingredient-form" style="display: none;">
            <input 
              type="text" 
              class="ingredient-input" 
              id="ingredient-input"
              placeholder="e.g., 2 cups flour"
            >
            <button type="submit" class="btn btn--primary btn--icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
            </button>
          </form>

          <button class="btn btn--ghost btn--block btn--sm" id="clear-ingredients-btn">
            Clear All Ingredients
          </button>
        </div>
      </aside>

    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container footer__inner">
      <p>Crafted with <span class="heart">‚ô•</span> by Dmitry Osipchuk ‚Äî <span id="current-year"></span></p>
      <div class="footer__links">
        <a href="https://github.com/do88" target="_blank" rel="noopener">GitHub</a>
        <a href="https://www.linkedin.com/in/osipchuk/" target="_blank" rel="noopener">LinkedIn</a>
      </div>
    </div>
  </footer>

  <script type="module" src="/src/ts/recipe.ts"></script>
</body>
</html>
